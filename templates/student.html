{% extends "base.html" %}

{% block title %}
    All Students
{% endblock %}

{% block body %}
<!-- Page Content  -->

<div>
  <div class="student">
    <div class="p-4 form-title">
      <h2 class="text-center">الطلاب</h2>
    </div>
    <div class="row">
      <div class="table-control m-2" style="position:relative;display:-webkit-inline-box;">
        <div>
          <button type="button" id="filter_button"  class="btn btn-light" name="button"><i class="fas fa-filter fa-sm"></i> Filter</button>

          <div class="ml-1">
           <div class="pagination-info">
             {{ pagination.info }}
           </div>
           <div class="toggle-view p-2">
             <button type="button" id="list_view" onclick="viewList()" class="btn btn-outline-dark btn-sm"><i class="fas fa-list-ul"></i></button>
             <button type="button" id="card_view" onclick="viewCard()" class="btn btn-outline-dark btn-sm"><i class="fas fa-barcode"></i></button>
           </div>
         </div>
        </div>



        <div class="form_filter m-1" id="filter_form">
          <form class="form-inline">
            <select class="custom-select my-1 mr-sm-2" name="major">
              <option value="0">......</option>
              {% for row in majors  %}
              <option value="{{ row.id }}">{{ row.name }}</option>
              {% endfor %}
            </select>

            <select class="custom-select my-1 mr-sm-2" name="level">
              <option value="0">......</option>
              {% for row in levels %}
              <option value="{{ row.id }}">{{ row.name }}</option>
              {% endfor %}
            </select>

            <button type="submit" class="btn btn-primary mb-2 btn-sm">Search</button>
          </form>
        </div>


      </div>

      <form action="{{ url_for('delete_all') }}" method="post">
        <button class="btn btn-danger btn-sm" title="Delete All" type="submit" style="cursor: pointer;" name="delete_all"><i class="fas fa-trash-alt" ></i></button>
      </form>
      <form action="{{ url_for('generate_svg') }}" method="post" style="margin-left:5px">
        <button class="btn btn-info btn-sm" title="Generate SVG Image" type="submit" style="cursor: pointer;" name="generate"><i class="fas fa-barcode" ></i></button>
        <!-- <input class="input-group-text" type="submit" style="cursor: pointer;" name="generate" value="Generate Barcode .SVG"> -->
      </form>

    </div>
    <div class="display-barcode">

      <div class="list-view" id="list">


        <table class="table text-right" style="direction:rtl;">
          <thead>
            <tr>
              <th scope="col"><input type="checkbox" onClick="toggle(this)" style="height:1em;width: 1em;" name="selectall" value="0"></th>
              <th scope="col">#</th>
              <th scope="col">الكود</th>
              <th scope="col">الاسم</th>
              <th scope="col">الشعبة</th>
              <th scope="col">الفرقة</th>
              <th scope="col">الباركود</th>
              <th scope="col">الملفات</th>
            </tr>
          </thead>
          <tbody>

            {% for row in students %}

            <tr>
              <td><input type="checkbox" name="student" value="{{ row.id }}" style="height: .9em;width: .9em;"></td>
              <th scope="row">{{ loop.index + pagination.skip }}</th>
              <td>{{ row.un_id }}</td>
              <td><a href="{{ url_for('student', id=row.id) }}">{{ row.name }}</a></td>
              <td>{{ row.major_id }}</td>
              <td>{{ row.level_id }}</td>
              {% if row.barcode_path %}
              <td><img src="{{ url_for('static', filename=row.barcode_path) }}" alt="{{ row.name }}" style="height:34%" title="{{ row.un_id }}-{{ row.name }}"></td>
              {% else %}
              <td>-</td>
              {% endif %}
              <td></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="card" id="card">
        <div class="row">
          {% for row in students %}
          <div class="col-md-2">
            <div class="card p-1" for="check_{{ row.un_id }}" style="width: 11rem;position:relative;">

              <input type="checkbox" name="student_card_v" id="check_{{ row.un_id }}" value="{{ row.id }}" style="position:absolute; right:1px"/>
              {% if row.barcode_path %}
              <img src="{{ url_for('static', filename=row.barcode_path) }}" alt="{{ row.name }}" class="card-img-top"  title="{{ row.un_id }}-{{ row.name }}">
              {% else %}

              {% endif %}
              <div class="card-body">
                <p class="card-text">{{ row.major_id }} - {{ row.level_id }}</p>
                <a href="#" class="btn btn-outline-primary btn-sm">Print</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>

      </div>

    </div>
      <div class="pagination-bar" style="margin:0 40%">
        {{ pagination.links }}
      </div>

  </div>
</div>


{% endblock%}
